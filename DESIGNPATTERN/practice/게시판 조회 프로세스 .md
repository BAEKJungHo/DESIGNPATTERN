# 게시판 조회 프로세스 

- 적용된 디자인 패턴
  - 전략 패턴
  - 팩토리 메서드 패턴 


조회 vs 상세

public abstract class AbstractArticlesFinder
ArticlesFinderFactory
ArticlesFinderStrategy
ArticlesxxxFinder


크게 목록 조회와 상세 조회로 나눈다.

패키지도 이해하기 쉽게 factory 와 strategy 로 나누기


```java
public interface MecArticlesFinderStrategy {

    List<MecArticleVo> findArticles(MecArticleVo articleVo);

}
```

그리고 이걸 구현하는 각각의 전략들

```java
public class MecArticlesRepliesFinder implements MecArticlesFinderStrategy {

    private final MecArticleService articleService;

    public void MecArticlesRepliesFinder(MecArticleService articleService) {
        this.articleService = articleService;
    }

    public List<MecArticleVo> findArticles(MecArticleVo articleVo) {
        articleService.findReplies(articleVo);
    }

}
```

나머지 7개 생략 (조회의 경우에는 댓글이나 개인정보 조회가 필요 없지만, 상세의 경우에는 필요하다 따라서 조회는 이전글 다음글과 공지 여부만 판별하면된다.) 

이전글 다음글 쿼리 계획이 정해지면 나머지 클래스도 정해진다.


조회하는 행동(활동) 자체를 AbstractMecArticlesFinder 에 국한시킨다.

```java
public abstract class AbstractMecArticlesFinder {

    // articleMasterVo 가 type 이 된다.
    public List<MecArticles> findArticles(MecArticleMasterVo articleMasterVo, MecArticleVo articleVo) {
         MecArticlesFinderStrategy articleFinderStrategy = findArticlesStrategy(articleMasterVo);
         List<MecArticleVo> articles = articleFinderStrategy.findArticles(articleVo);   // 공지여부를 판단해서 조회해놓고

         // if 이전글 다음글
         return articles;
    }

    // 전략 객체를 만드는 일은 서브 클래스에서 담당
    protected abstract MecArticlesFinderStrategy findArticlesStrategy(MecArticleMasterVo articleMasterVo);

}
```

서브 클래스

```java
public class MecArticlesFinderFactory extends AbstractArticlesFinder {
    
    @Override
    protected MecArticlesFinderStrategy findArticlesStrategy(MecArticleMasterVo articleMasterVo) {
        boolean isUsingNotice = "Y".equals(articleMasterVo.getNoticeSts());
        if(isUsingNotice) {
            return MecArticlesNoticeFinder;
        } else {
            return MecArticlesEmptyNoticeFinder;
        }
    }

}
``` 
